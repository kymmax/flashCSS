/*!
 * flashCSS 1.5.7
 * 2023-10-24
 * https://github.com/kymmax/flashCSS
 * 
 * @license Copyright 2023, flashCSS. All rights reserved.
 * @author: Jason Kuo, kymmax0420@gmail.com
 * 
 * Licensed MIT
 */
export default function flashCSS(a={}){function b(a){let b=v.querySelectorAll(a),c=Array.from(b);return c}function c(a){if(a.flashID||x.test(a.tagName))return;const b=new Date().getTime()+w.length,c=new MutationObserver(function(a){a.forEach(function(a){"class"===a.attributeName&&(f.template(),f.init(a.target,!0))})});c.observe(a,{attributes:!0,attributeFilter:["class"]}),c.id=b,a.flashID=b,w.push(c)}function d(){const a=new MutationObserver(function(a){a.forEach(function(a){"childList"===a.type&&a.removedNodes.forEach(function(a){const b=a.flashID,c=w.findIndex(a=>a.id===1*b);-1!==c&&(w[c]?.disconnect(),w.splice(c,1),a.querySelectorAll("*").forEach(a=>{const b=a.flashID,c=w.findIndex(a=>a.id===1*b);w[c]?.disconnect(),w.splice(c,1)}))})})});a.observe(v,{childList:!0,subtree:!0})}function e(){const a=new MutationObserver(function(a){a.forEach(function(a){if("childList"===a.type)for(let b of a.addedNodes)b.nodeType!==Node.ELEMENT_NODE||x.test(b.tagName)||(f.template(),f.init(b,!0),c(b),b.querySelectorAll("*").forEach(a=>{x.test(a.tagName)||(f.init(a,!0),c(a))}))})});a.observe(v,{childList:!0,subtree:!0})}let f=this,g="css",h="flashCSS",i={xs:0,sm:576,md:768,lg:992,xl:1280,...a.setMedia},j="";Object.keys(i).forEach(function(a,b,c){j+=a+(b===c.length-1?"":"|")});let k=new RegExp("^("+j+")$","g"),l={d:["display"],flexDir:["flex-direction"],justifyContent:["justify-content"],alignItems:["align-items"],alignSelf:["align-self"],justifyAlign:["justify-content","align-items"],flexWrap:["flex-wrap"],order:["order"],flex:["flex"],ps:["position"],w:["width"],h:["height"],wh:["width","height"],maxw:["max-width"],minw:["min-width"],maxh:["max-height"],minh:["min-height"],gTempCol:["grid-template-columns"],gAutoRow:["grid-auto-rows"],gColStart:["grid-column-start"],gColEnd:["grid-column-end"],gRowStart:["grid-row-start"],gRowEnd:["grid-row-end"],gColGap:["grid-column-gap"],gRowGap:["grid-row-gap"],colCount:["column-count"],colGap:["column-gap"],colSpan:["column-span"],rowGap:["row-gap"],g:["gap"],placeContent:["place-content"],placeItems:["place-items"],p:["padding"],pr:["padding-right"],pl:["padding-left"],pt:["padding-top"],pb:["padding-bottom"],px:["padding-left","padding-right"],py:["padding-top","padding-bottom"],m:["margin"],mr:["margin-right"],ml:["margin-left"],mt:["margin-top"],mb:["margin-bottom"],mx:["margin-left","margin-right"],my:["margin-top","margin-bottom"],at:["top"],ab:["bottom"],al:["left"],ar:["right"],fz:["font-size"],fl:["letter-spacing"],fh:["line-height"],fa:["text-align"],fw:["font-weight"],fd:["text-decoration"],fi:["text-indent"],ft:["text-transform"],br:["border"],bw:["border-width"],bc:["border-color"],bs:["border-style"],round:["border-radius"],sdb:["box-shadow"],sdt:["text-shadow"],color:["color"],filter:["filter"],blend:["mix-blend-mode"],bg:["background"],bgc:["background-color"],bgi:["background-image"],bgs:["background-size"],bgp:["background-position"],bgr:["background-repeat"],bgo:["background-origin"],ts:["transition"],tf:["transform"],tfStyle:["transform-style"],tfOrigin:["transform-origin"],float:["float"],o:["opacity"],ov:["overflow"],ws:["white-space"],z:["z-index"],objFit:["object-fit"],objPos:["object-position"],ani:["animation"],ratio:["aspect-ratio"],pointer:["pointer-events"],cursor:["cursor"],select:["user-select"],va:["vertical-align"],wm:["writing-mode"],...a.setStyle};Array.isArray(a.deleteStyle)&&a.deleteStyle.forEach(a=>{delete l[a]});let m="";Object.keys(l).forEach(function(a,b,c){m+=a+(b===c.length-1?"":"|")});let n=new RegExp("^("+m+")$","g"),o={":":":","~":"~",".":".",neg:"-","@":"@","#":"#",$:"$","%":"%","^":"^","&":"&","*":"*","`":"`",_:" ",",":",","(":"(",")":")","/":"/","?":"?","!":" !important",...a.setSymbol},p="";Object.keys(o).forEach(function(a,b,c){p+=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+(b===c.length-1?"":"|")});let q=new RegExp("("+p+")","g"),r=a.link?a.link:"-",s="",t=[],u={};Object.keys(i).forEach(function(a){u[a]=""}),this.init=function(b,c){let d=b.getAttribute("class");null==d||(d=d.split(" "),d.forEach(function(b){let d=!1,e=b.split(r)[0],g=e.replace(n,function(a){return d=!0,l[a]});if(!d)return;let h=!1,i=b.split(r)[1];if(!i)return;let j,m,p=i.replace(k,function(a){return h=!0,a});if(h?j=m=b.split(e+r+p+r)[1]:(p="",j=m=b.split(e+r)[1]),j=j.replace(q,function(a,b){return(0<b?"":"\\")+a}),m=m.replace(q,function(a,b){return o[b]}),m.includes("rgba")&&m.includes("#")){let a=m.split("#")[1].substring(0,6),b=f.hexToRgb("#"+a);m=m.replace("#"+a,b.r+","+b.g+","+b.b)}a.setCustomVal&&(m=a.setCustomVal(m)),m.includes("~")&&(m=m.replace("~",""));let v,w=!1;if(m.includes(":")){w=!0;let a=m.split("-");v=a[0].split(":")[1],m=m.split(v+"-")[1]}let x=e+("\\"+r)+(h?p+("\\"+r):"")+j;if(t.includes(x))return;t.push(x);let y="";g.split(",").forEach(function(b){y+=b+": "+m+(a.important?" !important;":";")});let z="."+x+(w?":"+v:"")+"{"+y+"} ";return c?f.update(p,z):void(h?u[p]+=z:s+=z)}))};let v=document.querySelector(a.target?a.target:"body"),w=[];const x=/^(head|meta|link|title|option|script|noscript|style)$/i;this.addMedia=function(){Object.keys(u).forEach(function(a){s+="@media (min-width:"+i[a]+"px) {"+u[a]+"} "})},this.update=function(b,c){let d=document.querySelectorAll(`style[data-${g}=${h}]`)[0],e=d.textContent.split(i[b]+"px) {");d.textContent=b?e[0]+i[b]+"px) {"+c+e[1]:[c,d.textContent].join(" "),a.onCompleted&&a.onCompleted()},this.addTag=function(){if(!document.querySelector(`[data-${g}=${h}]`)){let b=document.createElement("style");b.type="text/css",b.setAttribute(`data-${g}`,h),b.appendChild(document.createTextNode(s));let c=document.getElementsByTagName(a.style?a.style:"head")[0];c.appendChild(b),a.onCompleted&&a.onCompleted()}},this.observer=function(){a.observeDOM||(b("*").forEach(function(a){c(a)}),d())},this.observerDOM=function(){e(),b("*").forEach(function(a){c(a)}),d()},this.hexToRgb=function(a){let b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},this.copy=function(a){let c=a.getAttribute("class");if(null!==c){let d=c.split(" ");d.forEach(function(d){if(d.match(/^@/g)){let e=d.split("@")[1],f=c.replace(d,"");a.setAttribute("class",f);let g=b(".\\="+e);g.forEach(function(a){let b=a.getAttribute("class"),c=b.replace("="+e,f);a.setAttribute("class",c)})}})}},this.template=function(){a.setTemplate&&Object.keys(a.setTemplate).forEach(function(c){b(".\\="+c).forEach(function(b){let d=b.getAttribute("class");if(null!==d){let e=d.replace("="+c,a.setTemplate[c]);b.setAttribute("class",e)}})})},this.refresh=function(){f.template(),b("[class]").forEach(function(a){f.copy(a),f.init(a,!0)})},f.template(),b("[class]").forEach(function(a){f.copy(a),f.init(a)}),this.addMedia(),this.addTag(),!0===a.observe&&this.observer(),!0===a.observeDOM&&this.observerDOM(),!0===a.showPara&&console.table(l),!0===a.showMedia&&console.table(i)}