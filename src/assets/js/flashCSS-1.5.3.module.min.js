/*!
 * flashCSS 1.5.3
 * 2023-06-15
 * https://github.com/kymmax/flashCSS
 * 
 * @license Copyright 2023, flashCSS. All rights reserved.
 * @author: Jason Kuo, kymmax0420@gmail.com
 * 
 * Licensed MIT
 */
export default function flashCSS(a={}){function b(a){return document.querySelectorAll(a)}var c=this,d={xs:0,sm:576,md:768,lg:992,xl:1280,...a.setMedia},e="";Object.keys(d).forEach(function(a,b,c){e+=a+(b==c.length-1?"":"|")});var f=new RegExp("^("+e+")$","g"),g={d:["display"],flexDir:["flex-direction"],justifyContent:["justify-content"],alignItems:["align-items"],alignSelf:["align-self"],justifyAlign:["justify-content","align-items"],flexWrap:["flex-wrap"],order:["order"],flex:["flex"],ps:["position"],w:["width"],h:["height"],wh:["width","height"],maxw:["max-width"],minw:["min-width"],maxh:["max-height"],minh:["min-height"],gTempCol:["grid-template-columns"],gAutoRow:["grid-auto-rows"],gColStart:["grid-column-start"],gColEnd:["grid-column-end"],gRowStart:["grid-row-start"],gRowEnd:["grid-row-end"],gColGap:["grid-column-gap"],gRowGap:["grid-row-gap"],colCount:["column-count"],colGap:["column-gap"],colSpan:["column-span"],rowGap:["row-gap"],g:["gap"],placeContent:["place-content"],placeItems:["place-items"],p:["padding"],pr:["padding-right"],pl:["padding-left"],pt:["padding-top"],pb:["padding-bottom"],px:["padding-left","padding-right"],py:["padding-top","padding-bottom"],m:["margin"],mr:["margin-right"],ml:["margin-left"],mt:["margin-top"],mb:["margin-bottom"],mx:["margin-left","margin-right"],my:["margin-top","margin-bottom"],at:["top"],ab:["bottom"],al:["left"],ar:["right"],fz:["font-size"],fl:["letter-spacing"],fh:["line-height"],fa:["text-align"],fw:["font-weight"],fd:["text-decoration"],fi:["text-indent"],ft:["text-transform"],br:["border"],bw:["border-width"],bc:["border-color"],bs:["border-style"],round:["border-radius"],sdb:["box-shadow"],sdt:["text-shadow"],color:["color"],filter:["filter"],blend:["mix-blend-mode"],bg:["background"],bgc:["background-color"],bgi:["background-image"],bgs:["background-size"],bgp:["background-position"],bgr:["background-repeat"],bgo:["background-origin"],ts:["transition"],tf:["transform"],tfStyle:["transform-style"],tfOrigin:["transform-origin"],float:["float"],o:["opacity"],ov:["overflow"],ws:["white-space"],z:["z-index"],objFit:["object-fit"],objPos:["object-position"],ani:["animation"],ratio:["aspect-ratio"],pointer:["pointer-events"],cursor:["cursor"],select:["user-select"],va:["vertical-align"],wm:["writing-mode"],...a.setStyle},h="";Object.keys(g).forEach(function(a,b,c){h+=a+(b==c.length-1?"":"|")});var j=new RegExp("^("+h+")$","g"),k={":":":","~":"~",".":".",neg:"-","@":"@","#":"#",$:"$","%":"%","^":"^","&":"&","*":"*","`":"`",_:" ",",":",","(":"(",")":")","/":"/","?":"?","!":" !important",...a.setSymbol},l="";Object.keys(k).forEach(function(a,b,c){l+=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+(b==c.length-1?"":"|")});var m=new RegExp("("+l+")","g"),n=a.link?a.link:"-",o="",p=[],q={};Object.keys(d).forEach(function(a){q[a]=""}),this.init=function(b,d){var e=b.getAttribute("class").split(" ");e.forEach(function(b){var e=!1,h=b.split(n)[0],i=h.replace(j,function(a){return e=!0,g[a]});if(!e)return;var l=!1,r=b.split(n)[1];if(!r)return;var s,t,u=r.replace(f,function(a){return l=!0,a});if(l?s=t=b.split(h+n+u+n)[1]:(u="",s=t=b.split(h+n)[1]),s=s.replace(m,function(a,b){return(0<b?"":"\\")+a}),t=t.replace(m,function(a,b){return k[b]}),t.includes("rgba")&&t.includes("#")){var v=t.split("#")[1].substring(0,6),w=c.hexToRgb("#"+v);t=t.replace("#"+v,w.r+","+w.g+","+w.b)}a.setCustomVal&&(t=a.setCustomVal(t)),t.includes("~")&&(t=t.replace("~",""));let x,y=!1;if(t.includes(":")){y=!0;var z=t.split("-");x=z[0].split(":")[1],t=z[1]}var A=h+("\\"+n)+(l?u+("\\"+n):"")+s;if(!p.includes(A)){p.push(A);var B="";i.split(",").forEach(function(b){B+=b+": "+t+(a.important?" !important;":";")});var C="."+A+(y?":"+x:"")+"{"+B+"} ";return d?c.update(u,C):void(l?q[u]+=C:o+=C)}})},this.addMedia=function(){Object.keys(q).forEach(function(a){o+="@media (min-width:"+d[a]+"px) {"+q[a]+"} "})},this.update=function(c,e){var f=b("style[data-css=\"flashCSS\"]")[0],g=f.textContent.split(d[c]+"px) {");f.textContent=c?g[0]+d[c]+"px) {"+e+g[1]:[e,f.textContent].join(" "),a.onCompleted&&a.onCompleted()},this.addTag=function(){var b=document.createElement("style");b.type="text/css",b.setAttribute("data-css","flashCSS"),b.appendChild(document.createTextNode(o));var c=document.getElementsByTagName(a.style?a.style:"head")[0];c.appendChild(b),a.onCompleted&&a.onCompleted()},this.observer=function(){const a=new MutationObserver(function(a){a.forEach(function(a){"class"===a.attributeName&&c.init(a.target,!0)})});b("*").forEach(function(b){a.observe(b,{attributes:!0})})},this.observerDOM=function(){const a=new MutationObserver(function(a){a.forEach(function(a){if("childList"===a.type)for(let b of a.addedNodes)b.nodeType===Node.ELEMENT_NODE&&b.hasAttribute("class")&&c.init(b,!0)})});a.observe(document.body,{childList:!0,subtree:!0})},this.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},this.copy=function(a){var c=a.getAttribute("class"),d=c.split(" ");d.forEach(function(d){if(d.match(/^@/g)){var e=d.split("@")[1],f=c.replace(d,"");a.setAttribute("class",f);var g=b(".\\="+e);g.forEach(function(a){var b=a.getAttribute("class"),c=b.replace("="+e,f);a.setAttribute("class",c)})}})},this.template=function(){a.setTemplate&&Object.keys(a.setTemplate).forEach(function(c){b(".\\="+c).forEach(function(b){var d=b.getAttribute("class"),e=d.replace("="+c,a.setTemplate[c]);b.setAttribute("class",e)})})},a.observe&&this.observer(),a.observeDOM&&this.observerDOM(),a.showPara&&console.table(g),a.showMedia&&console.table(d),this.refresh=function(){c.template(),b("[class]").forEach(function(a){c.copy(a),c.init(a,!0)})},c.template(),b("[class]").forEach(function(a){c.copy(a),c.init(a)}),this.addMedia(),this.addTag()}